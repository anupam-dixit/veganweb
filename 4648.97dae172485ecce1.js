"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4648],{4648:(b,f,n)=>{n.r(f),n.d(f,{ChatingPageModule:()=>S});var c=n(4755),p=n(5030),a=n(5562),d=n(8695),h=n(655),l=n(6191),t=n(2504),r=n(9477),u=n(227);const m=["content"];function v(o,g){if(1&o&&t._UZ(0,"img",10),2&o){const i=t.oxw();t.Q6J("src",i.data.profile_image?i.Env.BasePoint+i.data.profile_image:i.Env.BasePoint+"public/frontend/images/f_icon_user.jpg",t.LSH)}}const C=[{path:"",component:(()=>{class o{constructor(i,e,s,x,y){this.api=i,this.router=e,this.aroute=s,this.other=x,this.loadingCtrl=y,this.first=!0,this.Env=l.X}ngOnInit(){this.aroute.params.subscribe(i=>{"0"!=i.gid?(this.gid=i.gid,this.chatInterval=setInterval(()=>{this.groupMessageSendReceiveAll(i.gid)},2e3)):(console.log(i.id),this.id=i.id,this.chatInterval=setInterval(()=>{this.messageSendReceiveAll(i.id)},2e3))}),console.log(this.id,this.gid),this.aroute.queryParams.subscribe(i=>{this.data=JSON.parse(i.prop),console.log(this.data)})}ionViewDidEnter(){console.log(this.content),this.scrollToBottomOnInit()}scrollToBottomOnInit(){this.content.scrollToBottom(400)}messageSendReceiveAll(i){return(0,h.mG)(this,void 0,void 0,function*(){this.api.messageSendReceiveAll({touserId:i,userId:JSON.parse(localStorage.getItem("userData")).id}).subscribe(e=>{this.chatData=e.result,this.first&&(this.first=!1,this.scrollToBottomOnInit())},e=>{this.other.presentToast("Something went Wrong!!","information-circle-outline","danger")})})}groupMessageSendReceiveAll(i){return(0,h.mG)(this,void 0,void 0,function*(){this.api.groupMessageSendReceiveAll({groupId:i,userId:JSON.parse(localStorage.getItem("userData")).id}).subscribe(e=>{this.chatData=e.result,this.first&&(this.first=!1,this.scrollToBottomOnInit())},e=>{this.other.presentToast("Something went Wrong!!","information-circle-outline","danger")})})}presentLoading(i){return(0,h.mG)(this,void 0,void 0,function*(){return yield i.present()})}messageSend(){return(0,h.mG)(this,void 0,void 0,function*(){this.first=!0;let i=null;const e=yield this.loadingCtrl.create({message:"Loading..."});this.presentLoading(e),console.log(this.id,this.gid),this.gid?(i={groupId:this.gid,userId:JSON.parse(localStorage.getItem("userData")).id,msg:this.msg},this.api.groupMessageSend(i).subscribe(s=>{console.log(s),this.msg="",e.dismiss()},s=>{e.dismiss(),this.other.presentToast("Something went Wrong!!","information-circle-outline","danger")})):(i={touserId:this.id,userId:JSON.parse(localStorage.getItem("userData")).id,msg:this.msg},this.api.messageSend(i).subscribe(s=>{console.log(s),this.msg="",e.dismiss()},s=>{e.dismiss(),this.other.presentToast("Something went Wrong!!","information-circle-outline","danger")})),this.scrollToBottomOnInit()})}ngOnDestroy(){clearInterval(this.chatInterval)}}return o.\u0275fac=function(i){return new(i||o)(t.Y36(r.s),t.Y36(d.F0),t.Y36(d.gz),t.Y36(u.m),t.Y36(a.HT))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-chating"]],viewQuery:function(i,e){if(1&i&&t.Gf(m,5),2&i){let s;t.iGM(s=t.CRH())&&(e.content=s.first)}},decls:16,vars:7,consts:[[1,"new-background-color"],["slot","start",2,"color","#fff"],["slot","start","size","small",1,"title",2,"color","#fff","margin-left","10px"],[1,"user_img"],["alt","icon",3,"src",4,"ngIf"],["content",""],[1,"jd-body",3,"innerHtml"],[1,"jd-footer"],["type","text","placeholder","Write A Message",3,"ngModel","ngModelChange"],[3,"disabled","click"],["alt","icon",3,"src"]],template:function(i,e){1&i&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0),t._UZ(2,"ion-back-button",1),t.TgZ(3,"ion-title",2)(4,"div",3),t.YNc(5,v,1,1,"img",4),t.TgZ(6,"span"),t._uU(7),t.ALo(8,"titlecase"),t.qZA()()()()(),t.TgZ(9,"ion-content",null,5),t._UZ(11,"div",6),t.TgZ(12,"div",7)(13,"input",8),t.NdJ("ngModelChange",function(x){return e.msg=x}),t.qZA(),t.TgZ(14,"button",9),t.NdJ("click",function(){return e.messageSend()}),t._uU(15,"Send"),t.qZA()()()),2&i&&(t.xp6(5),t.Q6J("ngIf",!e.gid),t.xp6(2),t.Oqu(e.gid?e.data.group_name:t.lcZ(8,5,e.data.name)),t.xp6(4),t.Q6J("innerHtml",e.chatData,t.oJD),t.xp6(2),t.Q6J("ngModel",e.msg),t.xp6(1),t.Q6J("disabled",!e.msg))},dependencies:[c.O5,p.Fj,p.JJ,p.On,a.oU,a.W2,a.Gu,a.wd,a.sr,a.cs,c.rS],styles:['.user_iocn{width:100%;float:left;padding:0 5px}.back_icon{font-size:20px;float:left;color:#fff;padding:6px 4px 0}.user_img{display:flex;align-items:center}.user_img img{width:30px;height:30px;border-radius:50px}.user_iocn h2{font-size:13px;padding:7px 0 0 10px;margin:0;float:left}.jd-body{background:#fff;overflow-y:auto;margin-bottom:52px}.chat-date-heading{width:100%;float:left;text-align:center;padding:10px 0;color:#b7b6b6;font-size:12px;position:relative}.chat-date-heading:before{content:"";display:block;width:83px;background-color:#e1e1e1;height:1px;margin:0 0 -9px}.chat-date-heading:after{content:"";display:block;width:83px;background-color:#e1e1e1;height:1px;position:absolute;right:0;top:8px}.received-chats{margin:2px 10px}.received-msg{display:inline-block;padding:0;vertical-align:top;width:94%;float:left}.received-msg-inbox{float:right;width:auto;margin-left:0;background:#d7f3b6;position:relative;border-radius:5px;text-align:left;padding:0;float:left;margin-bottom:8px}.received-msg-inbox .in-title{font-weight:700;padding:3px 45px 0 9px!important}.received-msg-inbox .in-time{position:absolute;text-transform:capitalize;right:5px;left:auto;top:0;text-align:right;font-size:12px!important}.received-msg-inbox p{color:#fff;font-size:14px;margin:0;color:#000;padding:3px 6px 2px 9px;width:100%}.outgoing-chats{overflow:hidden;margin:6px 10px;width:82%;float:right}.outgoing-chats-msg{float:right;width:auto;margin-left:0;background:#e0fdfc;position:relative;border-radius:5px;text-align:left;padding:0}.outgoing-chats-msg p{color:#fff;font-size:14px;margin:0;text-transform:capitalize;color:#000;padding:3px 2px 2px 9px;width:100%}.outgoing-chats-msg p{color:#fff;font-size:14px;margin:0;color:#000;padding:3px 2px 2px 9px;width:100%}.out-time{position:absolute;right:5px;left:auto;top:0;text-align:right;font-size:12px!important}.out-title{padding:3px 43px 0 9px!important;font-weight:700}.jd-footer{background:white;color:#fff;overflow:hidden;position:fixed;padding:6px;box-shadow:#0000001a 0 0 5px,#0000001a 0 0 1px;margin-top:10px;width:100%;bottom:0}.jd-footer input[type=text]{background:#fff;padding:5px 10px;float:left;margin-right:3px;font-size:14px!important;border:1px solid #c3c3c3;width:84%;border-radius:50px 0 0 50px;margin-left:5px;color:#000;height:38px}.jd-footer button{background:#6ec5c3;color:#fff;padding:5px 10px;height:38px;border-radius:0 50px 50px 0;margin-left:-10px}\n'],encapsulation:2}),o})()}];let I=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[d.Bz.forChild(C),d.Bz]}),o})(),S=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[c.ez,p.u5,a.Pc,I]}),o})()},227:(b,f,n)=>{n.d(f,{m:()=>h});var c=n(655),p=n(7579),a=n(2504),d=n(5562);let h=(()=>{class l{constructor(r,u){this.toastController=r,this.loadingCtrl=u,this.nCount=new p.x,this.notificationCount=this.nCount.asObservable()}presentToast(r,u,m){return(0,c.mG)(this,void 0,void 0,function*(){yield(yield this.toastController.create({message:r,duration:2500,icon:u,color:m})).present()})}showLoading(r){return(0,c.mG)(this,void 0,void 0,function*(){return yield this.loadingCtrl.create({message:r})})}setnotificationCount(r){this.nCount.next(r)}}return l.\u0275fac=function(r){return new(r||l)(a.LFG(d.yF),a.LFG(d.HT))},l.\u0275prov=a.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()}}]);